---
title: 02-ruståŸºæœ¬ç±»å‹
date: 2023-08-26 21:17:00
categories:
- rust
tags:
- ruståŸºæœ¬ç±»å‹
- rust

---









[toc]

# RuståŸºæœ¬æ•°æ®ç±»å‹

Rust æ¯ä¸ªå€¼éƒ½æœ‰å…¶ç¡®åˆ‡çš„æ•°æ®ç±»å‹ï¼Œæ€»çš„æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šåŸºæœ¬ç±»å‹å’Œå¤åˆç±»å‹ã€‚ åŸºæœ¬ç±»å‹æ„å‘³ç€å®ƒä»¬å¾€å¾€æ˜¯ä¸€ä¸ªæœ€å°åŒ–åŸå­ç±»å‹ï¼Œæ— æ³•è§£æ„ä¸ºå…¶å®ƒç±»å‹(ä¸€èˆ¬æ„ä¹‰ä¸Šæ¥è¯´)ï¼Œç”±ä»¥ä¸‹ç»„æˆï¼š

- æ•°å€¼ç±»å‹: æœ‰ç¬¦å·æ•´æ•° (`i8`, `i16`, `i32`, `i64`, `isize`)ã€ æ— ç¬¦å·æ•´æ•° (`u8`, `u16`, `u32`, `u64`, `usize`) ã€æµ®ç‚¹æ•° (`f32`, `f64`)ã€ä»¥åŠæœ‰ç†æ•°ã€å¤æ•°
- å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²å­—é¢é‡å’Œå­—ç¬¦ä¸²åˆ‡ç‰‡ `&str`
- å¸ƒå°”ç±»å‹ï¼š `true`å’Œ`false`
- å­—ç¬¦ç±»å‹: è¡¨ç¤ºå•ä¸ª Unicode å­—ç¬¦ï¼Œå­˜å‚¨ä¸º 4 ä¸ªå­—èŠ‚
- å•å…ƒç±»å‹: å³ `()` ï¼Œå…¶å”¯ä¸€çš„å€¼ä¹Ÿæ˜¯ `()`

## 1.æ•°å€¼ç±»å‹

| é•¿åº¦       | æœ‰ç¬¦å·ç±»å‹ | æ— ç¬¦å·ç±»å‹ |
| ---------- | ---------- | ---------- |
| 8 ä½       | `i8`       | `u8`       |
| 16 ä½      | `i16`      | `u16`      |
| 32 ä½      | `i32`      | `u32`      |
| 64 ä½      | `i64`      | `u64`      |
| 128 ä½     | `i128`     | `u128`     |
| è§†æ¶æ„è€Œå®š | `isize`    | `usize`    |

æ•´å½¢å­—é¢é‡å¯ä»¥ç”¨ä¸‹è¡¨çš„å½¢å¼ä¹¦å†™ï¼š

| æ•°å­—å­—é¢é‡         | ç¤ºä¾‹          |
| ------------------ | ------------- |
| åè¿›åˆ¶             | `98_222`      |
| åå…­è¿›åˆ¶           | `0xff`        |
| å…«è¿›åˆ¶             | `0o77`        |
| äºŒè¿›åˆ¶             | `0b1111_0000` |
| å­—èŠ‚ (ä»…é™äº `u8`) | `b'A'`        |

## 2.[æµ®ç‚¹ç±»å‹](https://course.rs/basic/base-type/numbers.html#æµ®ç‚¹ç±»å‹)

**æµ®ç‚¹ç±»å‹æ•°å­—** æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ï¼Œåœ¨ Rust ä¸­æµ®ç‚¹ç±»å‹æ•°å­—ä¹Ÿæœ‰ä¸¤ç§åŸºæœ¬ç±»å‹ï¼š `f32` å’Œ `f64`ï¼Œåˆ†åˆ«ä¸º 32 ä½å’Œ 64 ä½å¤§å°ã€‚é»˜è®¤æµ®ç‚¹ç±»å‹æ˜¯ `f64`ï¼Œåœ¨ç°ä»£çš„ CPU ä¸­å®ƒçš„é€Ÿåº¦ä¸ `f32` å‡ ä¹ç›¸åŒï¼Œä½†ç²¾åº¦æ›´é«˜ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºæµ®ç‚¹æ•°çš„ç¤ºä¾‹ï¼š

```rust
fn main() {
    let x = 2.0; // f64

    let y: f32 = 3.0; // f32
}
```

## 3.[åºåˆ—(Range)](https://course.rs/basic/base-type/numbers.html#åºåˆ—range)

Rust æä¾›äº†ä¸€ä¸ªéå¸¸ç®€æ´çš„æ–¹å¼ï¼Œç”¨æ¥ç”Ÿæˆè¿ç»­çš„æ•°å€¼ï¼Œä¾‹å¦‚ **`1..5`ï¼Œç”Ÿæˆä» 1 åˆ° 4 çš„è¿ç»­æ•°å­—ï¼Œä¸åŒ…å« 5** ï¼›`1..=5`ï¼Œç”Ÿæˆä» 1 åˆ° 5 çš„è¿ç»­æ•°å­—ï¼ŒåŒ…å« 5ï¼Œå®ƒçš„ç”¨é€”å¾ˆç®€å•ï¼Œå¸¸å¸¸ç”¨äºå¾ªç¯ä¸­ï¼š

```rust
for i in 1..=5 {
    println!("{}",i);
}
```

æœ€ç»ˆç¨‹åºè¾“å‡º:

```console
1
2
3
4
5
```

**åºåˆ—åªå…è®¸ç”¨äºæ•°å­—æˆ–å­—ç¬¦ç±»å‹**ï¼ŒåŸå› æ˜¯ï¼šå®ƒä»¬å¯ä»¥è¿ç»­ï¼ŒåŒæ—¶ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸå¯ä»¥æ£€æŸ¥è¯¥åºåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå­—ç¬¦å’Œæ•°å­—å€¼æ˜¯ Rust ä¸­ä»…æœ‰çš„å¯ä»¥ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„ç±»å‹ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨å­—ç¬¦ç±»å‹åºåˆ—çš„ä¾‹å­ï¼š

```rust
for i in 'a'..='z' {
    println!("{}",i);
}
```

## 4.[æœ‰ç†æ•°å’Œå¤æ•°](https://course.rs/basic/base-type/numbers.html#æœ‰ç†æ•°å’Œå¤æ•°)

Rust çš„æ ‡å‡†åº“ç›¸æ¯”å…¶å®ƒè¯­è¨€ï¼Œå‡†å…¥é—¨æ§›è¾ƒé«˜ï¼Œå› æ­¤æœ‰ç†æ•°å’Œå¤æ•°å¹¶æœªåŒ…å«åœ¨æ ‡å‡†åº“ä¸­ï¼š

- æœ‰ç†æ•°å’Œå¤æ•°
- ä»»æ„å¤§å°çš„æ•´æ•°å’Œä»»æ„ç²¾åº¦çš„æµ®ç‚¹æ•°
- å›ºå®šç²¾åº¦çš„åè¿›åˆ¶å°æ•°ï¼Œå¸¸ç”¨äºè´§å¸ç›¸å…³çš„åœºæ™¯

å¥½åœ¨ç¤¾åŒºå·²ç»å¼€å‘å‡ºé«˜è´¨é‡çš„ Rust æ•°å€¼åº“ï¼š[num](https://crates.io/crates/num)ã€‚

æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥å¼•å…¥ `num` åº“ï¼š

1. åˆ›å»ºæ–°å·¥ç¨‹ `cargo new complex-num && cd complex-num`
2. åœ¨ `Cargo.toml` ä¸­çš„ `[dependencies]` ä¸‹æ·»åŠ ä¸€è¡Œ `num = "0.4.0"`
3. å°† `src/main.rs` æ–‡ä»¶ä¸­çš„ `main` å‡½æ•°æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç 
4. è¿è¡Œ `cargo run`

```rust
use num::complex::Complex;

 fn main() {
   let a = Complex { re: 2.1, im: -1.2 };
   let b = Complex::new(11.1, 22.2);
   let result = a + b;

   println!("{} + {}i", result.re, result.im)
 }
```

#### [æ€»ç»“](https://course.rs/basic/base-type/numbers.html#æ€»ç»“)

ä¹‹å‰æåˆ°äº†è¿‡ Rust çš„æ•°å€¼ç±»å‹å’Œè¿ç®—è·Ÿå…¶ä»–è¯­è¨€è¾ƒä¸ºç›¸ä¼¼ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œé™¤äº†è¯­æ³•ä¸Šçš„ä¸åŒä¹‹å¤–ï¼Œè¿˜æ˜¯å­˜åœ¨ä¸€äº›å·®å¼‚ç‚¹ï¼š

- **Rust æ‹¥æœ‰ç›¸å½“å¤šçš„æ•°å€¼ç±»å‹**. å› æ­¤ä½ éœ€è¦ç†Ÿæ‚‰è¿™äº›ç±»å‹æ‰€å ç”¨çš„å­—èŠ‚æ•°ï¼Œè¿™æ ·å°±çŸ¥é“è¯¥ç±»å‹å…è®¸çš„å¤§å°èŒƒå›´ä»¥åŠä½ é€‰æ‹©çš„ç±»å‹æ˜¯å¦èƒ½è¡¨è¾¾è´Ÿæ•°
- **ç±»å‹è½¬æ¢å¿…é¡»æ˜¯æ˜¾å¼çš„**. Rust æ°¸è¿œä¹Ÿä¸ä¼šå·å·æŠŠä½ çš„ 16bit æ•´æ•°è½¬æ¢æˆ 32bit æ•´æ•°
- **Rust çš„æ•°å€¼ä¸Šå¯ä»¥ä½¿ç”¨æ–¹æ³•**. ä¾‹å¦‚ä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥å°† `13.14` å–æ•´ï¼š`13.14_f32.round()`ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»å‹åç¼€ï¼Œå› ä¸ºç¼–è¯‘å™¨éœ€è¦çŸ¥é“ `13.14` çš„å…·ä½“ç±»å‹

## 5.[å‡½æ•°è¦ç‚¹](https://course.rs/basic/base-type/function.html#å‡½æ•°è¦ç‚¹)

- å‡½æ•°åå’Œå˜é‡åä½¿ç”¨[è›‡å½¢å‘½åæ³•(snake case)](https://course.rs/practice/naming.html)ï¼Œä¾‹å¦‚ `fn add_two() -> {}`
- å‡½æ•°çš„ä½ç½®å¯ä»¥éšä¾¿æ”¾ï¼ŒRust ä¸å…³å¿ƒæˆ‘ä»¬åœ¨å“ªé‡Œå®šä¹‰äº†å‡½æ•°ï¼Œåªè¦æœ‰å®šä¹‰å³å¯
- æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½éœ€è¦æ ‡æ³¨ç±»å‹

```
fn add(i: i32, j: i32) -> i32 {
   i + j
 }

```

![img](https://pic2.zhimg.com/80/v2-54b3a6d435d2482243edc4be9ab98153_1440w.png)

### è¿”å›å€¼ï¼š

â€‹	[æ— è¿”å›å€¼`()`](https://course.rs/basic/base-type/function.html#æ— è¿”å›å€¼)

- å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ª `()`
- é€šè¿‡ `;` ç»“å°¾çš„è¡¨è¾¾å¼è¿”å›ä¸€ä¸ª `()`

â€‹    [æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•° `!`](https://course.rs/basic/base-type/function.html#æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•°-)

â€‹		å½“ç”¨ `!` ä½œå‡½æ•°è¿”å›ç±»å‹çš„æ—¶å€™ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ°¸ä¸è¿”å›( diverge function )ï¼Œç‰¹åˆ«çš„ï¼Œè¿™ç§è¯­æ³•å¾€å¾€ç”¨åšä¼šå¯¼è‡´ç¨‹åºå´©æºƒçš„å‡½æ•°ï¼š

## 6.ç»ƒä¹ 

[æ•°å€¼ç±»å‹ - Rust By Practice( Rust ç»ƒä¹ å®è·µ )](https://zh.practice.rs/basic-types/numbers.html)

```// å¡«ç©º
fn main() {
    let v: u16 = 38_u8 as u16; //ä»8ä½æ— ç¬¦å·æ•´æ•°ï¼ˆu8ï¼‰åˆ°16ä½æ— ç¬¦å·æ•´æ•°ï¼ˆu16ï¼‰çš„ç±»å‹è½¬æ¢
}
```

```

// ä¿®æ”¹ `assert_eq!` è®©ä»£ç å·¥ä½œ
fn main() {
    let x = 5;		//i32
    assert_eq!("i32".to_string(), type_of(&x)); //
}

// ä»¥ä¸‹å‡½æ•°å¯ä»¥è·å–ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œå¹¶è¿”å›ç±»å‹çš„å­—ç¬¦ä¸²å½¢å¼ï¼Œä¾‹å¦‚  "i8", "u8", "i32", "u32"
fn type_of<T>(_: &T) -> String {
    format!("{}", std::any::type_name::<T>())
}

```

```
fn main() {
    assert_eq!(i8::MAX, 127); 
    assert_eq!(u8::MAX, 255); 
}

```

```

// è§£å†³ä»£ç ä¸­çš„é”™è¯¯å’Œ `panic`
fn main() {
   let v1 = 251_u8.wrapping_add(8);
   let v2 = match u8::checked_add(251, 8) {
        Some(value) => value,
        None => {
            println!("Overflow occurred.");
            0
        }
    };
   println!("{},{}",v1,v2);
}

```

```
fn main() {
    let x = 1_000.000_1; // f64
    let y: f32 = 0.12; // f32
    let z = 0.01_f64; // f64
}
```

```c
#ä½¿ç”¨ä¸¤ç§æ–¹æ³•æ¥è®©ä¸‹é¢ä»£ç å·¥ä½œ
fn main() {
    assert!(0.1+0.2==0.3);
}
 fn main() {
     assert!(0.1_f32+0.2_f32==0.3_f32);
 }
//é™ä½ç²¾åº¦
fn main() {
    let eps=0.001;
    assert!((0.1_f64+ 0.2 - 0.3).abs() < eps);
}
//è®¾ç½®å…è®¸è¯¯å·®
```

### [åºåˆ—Range](https://zh.practice.rs/basic-types/numbers.html#åºåˆ—range)

1. ğŸŒŸğŸŒŸ ä¸¤ä¸ªç›®æ ‡: 1. ä¿®æ”¹ `assert!` è®©å®ƒå·¥ä½œ 2. è®© `println!` è¾“å‡º: 97 - 122

```
fn main() {
    let mut sum = 0;
    for i in -3..2 {
        sum += i
    }

    assert!(sum == -5);

    for c in 'a'..='z' {
        println!("{}",c as u8);
    }
}

```

```\// å¡«ç©º
use std::ops::{Range, RangeInclusive};
fn main() {
    assert_eq!((1..5), Range{ start: 1, end: 5 });
    assert_eq!((1..=5), RangeInclusive::new(1, 5));
}
///RangeInclusive::new(1, 5) åˆ›å»ºçš„æ˜¯ä¸€ä¸ªé—­åŒºé—´ï¼Œè¡¨ç¤ºä» 1 åˆ° 5ï¼ˆåŒ…æ‹¬ 5ï¼‰çš„èŒƒå›´ã€‚è‹¥ (1..5) åˆ›å»ºçš„æ˜¯ä¸€ä¸ªåŠå¼€åŒºé—´ï¼Œè¡¨ç¤ºä» 1 åˆ° 5ï¼ˆä¸åŒ…æ‹¬ 5ï¼‰çš„èŒƒå›´ã€‚
```

```
use std::mem::size_of_val;
fn main() {
    let unit: () = ();
    assert!(size_of_val(&unit) == 0);		//å•å…ƒç±»å‹å ç”¨çš„å†…å­˜å¤§å° 0

    println!("Success!")
}
```

### [è¯­å¥ä¸è¡¨è¾¾å¼](https://zh.practice.rs/basic-types/statements-expressions.html#è¯­å¥ä¸è¡¨è¾¾å¼)

```
fn main() {
   let v = {
       let mut x = 1;
       x += 2		// æ²¡æœ‰è¿”å›å€¼  
   };

   assert_eq!(v, 3);
}
æ­£ç¡®çš„åšæ³•
fn main() {
   let v = {
       let mut x = 1;
       x += 2;
       x
   };

   assert_eq!(v, 3);
}

let z = {
	// åˆ†å·è®©è¡¨è¾¾å¼å˜æˆäº†è¯­å¥ï¼Œå› æ­¤è¿”å›çš„ä¸å†æ˜¯è¡¨è¾¾å¼ `2 * x` çš„å€¼ï¼Œè€Œæ˜¯è¯­å¥çš„å€¼ `()`
	2 * x;
};
fn main() {
   let v = { let x = 3; x};

   assert!(v == 3);
}
```

### [å‡½æ•°](https://zh.practice.rs/basic-types/functions.html#å‡½æ•°)



## 7.æ€»ç»“ï¼š

1.`let x = 2.0; // f64`

2.æ¯”è¾ƒæµ®ç‚¹æ•°`(0.1_f64 + 0.2 - 0.3).abs() < 0.00001`

3.`ç¼–è¯‘å™¨ä¼šè¿›è¡Œè‡ªåŠ¨æ¨å¯¼ï¼Œç»™äºˆtwenty i32çš„ç±»å‹  let twenty = 20;`

4.æŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºè§„åˆ™å¤„ç†`et b = 255_u8.wrapping_add(20);  // 19`  `åœ¨ u8 çš„æƒ…å†µä¸‹ï¼Œ256 å˜æˆ 0ï¼Œ257 å˜æˆ 1ï¼Œ`

5.`(1..5)  è¡¨ç¤ºä» 1 åˆ° 5ï¼ˆä¸åŒ…æ‹¬ 5ï¼‰åŠå¼€åŒºé—´çš„èŒƒå›´`

6.`(1..=5)  è¡¨ç¤ºä» 1 åˆ° 5ï¼ˆåŒ…æ‹¬ 5ï¼‰åŠé—­åŒºé—´çš„èŒƒå›´`

6.**è¡¨è¾¾å¼ä¸èƒ½åŒ…å«åˆ†å·**ã€‚`è¡¨è¾¾å¼æ€»è¦è¿”å›å€¼`

7.è¿”å›å€¼ä¸ºï¼çš„è¡¨è¾¾å¼

```
loop {}  
panic!("Never return");  
todo!();  
unimplemented!();  //æœªå®ç°çš„å ä½ç¬¦å‡½æ•°
 
```
